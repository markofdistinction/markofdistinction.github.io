(()=>{"use strict";var y={};const m="MISSING_ENV_VAR".BITCOIN_ENABLED,p="refs/tags/v3.34.1",w=null,E=null,R="88240f11f105d47141371fd484f8d59279e6ff08",q=null,_="MISSING_ENV_VAR".TEST_ENV==="true",S=null,T=null,A=null,I=null,N=null;let r;(function(e){e.authenticationRequest="stacksAuthenticationRequest",e.signatureRequest="signatureRequest",e.structuredDataSignatureRequest="structuredDataSignatureRequest",e.transactionRequest="stacksTransactionRequest",e.profileUpdateRequest="profileUpdateRequest"})(r||(r={}));const l="stacks-wallet",v="content-script";let i;(function(e){e.transactionRequest="transactionRequest",e.transactionResponse="transactionResponse",e.authenticationRequest="authenticationRequest",e.authenticationResponse="authenticationResponse",e.signatureRequest="signatureRequest",e.signatureResponse="signatureResponse",e.structuredDataSignatureRequest="structuredDataSignatureRequest",e.structuredDataSignatureResponse="structuredDataSignatureResponse",e.profileUpdateRequest="profileUpdateRequest",e.profileUpdateResponse="profileUpdateResponse"})(i||(i={}));let d;(function(e){e.RequestDerivedStxAccounts="RequestDerivedStxAccounts",e.ShareInMemoryKeyToBackground="ShareInMemoryKeyToBackground",e.RequestInMemoryKeys="RequestInMemoryKeys",e.RemoveInMemoryKeys="RemoveInMemoryKeys",e.OriginatingTabClosed="OriginatingTabClosed"})(d||(d={}));const g=async(e,n={})=>new Promise((a,o)=>{const s=setTimeout(()=>{o("Unable to get response from Blockstack extension")},1e3),t=c=>{c.data.source==="blockstack-extension"&&c.data.method===`${e}Response`&&(clearTimeout(s),window.removeEventListener("message",t),a(c.data))};window.addEventListener("message",t),window.postMessage({method:e,source:"blockstack-app",...n},window.location.origin)}),u=(e,n)=>{const{data:a}=e,o=a.source===l,s=a.method===n;return o&&s&&!!a.payload},f={getURL:async()=>{const{url:e}=await g("getURL");return e},structuredDataSignatureRequest:async e=>{const n=new CustomEvent(r.structuredDataSignatureRequest,{detail:{signatureRequest:e}});return document.dispatchEvent(n),new Promise((a,o)=>{const s=t=>{if(u(t,i.signatureResponse)&&t.data.payload?.signatureRequest===e){if(window.removeEventListener("message",s),t.data.payload.signatureResponse==="cancel"){o(t.data.payload.signatureResponse);return}typeof t.data.payload.signatureResponse!="string"&&a(t.data.payload.signatureResponse)}};window.addEventListener("message",s)})},signatureRequest:async e=>{const n=new CustomEvent(r.signatureRequest,{detail:{signatureRequest:e}});return document.dispatchEvent(n),new Promise((a,o)=>{const s=t=>{if(u(t,i.signatureResponse)&&t.data.payload?.signatureRequest===e){if(window.removeEventListener("message",s),t.data.payload.signatureResponse==="cancel"){o(t.data.payload.signatureResponse);return}typeof t.data.payload.signatureResponse!="string"&&a(t.data.payload.signatureResponse)}};window.addEventListener("message",s)})},authenticationRequest:async e=>{const n=new CustomEvent(r.authenticationRequest,{detail:{authenticationRequest:e}});return document.dispatchEvent(n),new Promise((a,o)=>{const s=t=>{if(u(t,i.authenticationResponse)&&t.data.payload?.authenticationRequest===e){if(window.removeEventListener("message",s),t.data.payload.authenticationResponse==="cancel"){o(t.data.payload.authenticationResponse);return}a(t.data.payload.authenticationResponse)}};window.addEventListener("message",s)})},transactionRequest:async e=>{const n=new CustomEvent(r.transactionRequest,{detail:{transactionRequest:e}});return document.dispatchEvent(n),new Promise((a,o)=>{const s=t=>{if(u(t,i.transactionResponse)&&t.data.payload?.transactionRequest===e){if(window.removeEventListener("message",s),t.data.payload.transactionResponse==="cancel"){o(t.data.payload.transactionResponse);return}typeof t.data.payload.transactionResponse!="string"&&a(t.data.payload.transactionResponse)}};window.addEventListener("message",s)})},profileUpdateRequest:async e=>{const n=new CustomEvent(r.profileUpdateRequest,{detail:{profileUpdateRequest:e}});return document.dispatchEvent(n),new Promise((a,o)=>{const s=t=>{if(u(t,i.profileUpdateResponse)&&t.data.payload?.profileUpdateRequest===e){if(window.removeEventListener("message",s),t.data.payload.profileUpdateResponse==="cancel"){o(t.data.payload.profileUpdateResponse);return}typeof t.data.payload.profileUpdateResponse!="string"&&a(t.data.payload.profileUpdateResponse)}};window.addEventListener("message",s)})},getProductInfo(){return{version:"3.34.1",name:"Hiro Wallet for Web",meta:{tag:p,commit:R}}},request:function(e){throw new Error("`request` function is not implemented")}};window.StacksProvider=f})();
